<ion-view view-title="Manage Appliance" class="light-bg">
    <ion-nav-buttons side="right">
        <button class="button button-icon button-clear small-icon" ng-click="saveAll()">
            Save
        </button>
    </ion-nav-buttons>
    <ion-scroll zooming="false" direction="x" class="light-bg stickyScroll">
        <div class="flex-block">
            <div class="blocks text-center" ng-click="openarchive();" ng-if="appliance.status!='archive'">
                <h3 class="icon ln-archive"></h3> Archive
            </div>
            <div class="blocks text-center" ng-click="openarchive();" ng-if="appliance.status=='archive'">
                <h3 class="icon ln-archive"></h3> Un-Archive
            </div>
            <div class="blocks text-center" ng-click="opentransfer();" ng-if="appliance.status!='archive'">
                <h3 class="icon ln-tab"></h3> Transfer
            </div>
            <div class="blocks text-center" ng-click="opendelete();">
                <h3 class="icon ln-trash2"></h3> Delete
            </div>
            <!--            <div class="blocks text-center" ng-click="openservice();">-->
            <a class="blocks text-center" ng-href="#/tab/home/services" ng-if="appliance.status!='archive'">
                <h3 class="icon ln-wrench"></h3> Service
            </a>
            <div class="blocks text-center" ng-click="openreport();" ng-if="appliance.status!='archive'">
                <h3 class="icon ln-papers"></h3> Report
            </div>
            <div class="blocks text-center" ng-click="sendtowebsite();" ng-if="appliance.status!='archive'">
                <h3 class="icon ln-circle-exclamation"></h3> Info
            </div>
            <div class="blocks text-center" ng-if="appliance.status!='archive'">
                <h3 class="icon ln-cart"></h3> Buy
            </div>
            <div class="blocks text-center" ng-if="appliance.status!='archive'">
                <h3 class="icon ln-tag"></h3> Sell
            </div>
            <div class="blocks text-center" ng-if="appliance.status!='archive'">
                <h3 class="icon ln-register"></h3> Review
            </div>
            <div class="blocks text-center" ng-if="appliance.status!='archive'">
                <h3 class="icon ln-users"></h3> Forum
            </div>
        </div>
    </ion-scroll>
    <ion-content class="scroll-above bbar-white">
        <div class="row block-down">
            <div class="col text-center blockss" ng-click="changetab(1);" ng-class="{'activetab': tabvalue == 1}">
                Appliance Summary
            </div>
            <div class="col text-center blockss" ng-click="changetab(2);" ng-class="{'activetab': tabvalue == 2}">
                Purchase Details
            </div>
            <div class="col text-center blockss" ng-click="changetab(3);" ng-class="{'activetab': tabvalue == 3}">
                Warranty / AMC
            </div>
            <div class="col text-center blockss endblocks" ng-click="changetab(4);" ng-class="{'activetab': tabvalue == 4}">
                Documents / Notes
            </div>
        </div>

        <div class="appliance" ng-if="tabvalue == 1">

            <!--
            <div class="item withlist">
                <div class="picture assertive-bg" style="background-image: url('img/icons/Mobile.png');">
                                 <label class="item item-input">
                <span class="input-label">Product*</span>
                <input type="text" required>
            </label>
            <label class="item item-input">
                <span class="input-label">Name As*</span>
                <input type="text" required>
            </label>
                </div>
            </div>
-->
            <div class="wish wishs">
                <div class="picturess  {{appliancecolor}}" style="background-image: url('img/icons/{{appliance.appliancetype.icon}}');"></div>
                <label class="item item-input input-up" ng-click="openproductsearch();" ng-class="allvalidation8[0].validation">
                    <span class="input-label">Product *</span>
                    <input type="text" ng-model="appliance.appliancetype.name" readonly>
                </label>
                <label class="item item-input input-btm" ng-class="allvalidation8[1].validation">
                    <span class="input-label">Name As *</span>
                    <input type="text" ng-model="appliance.name">
                </label>
            </div>

            <div class="list" style="margin-top: 1px;">
                <label class="item item-input" ng-click="openbrandsearch();" ng-class="allvalidation8[2].validation">
                    <span class="input-label">Brand *</span>
                    <input type="text" ng-model="appliance.brand.name" readonly>
                </label>

                <label class="item item-input">
                    <span class="input-label">Model No.</span>
                    <input type="text" ng-model="appliance.modelnumber">
                </label>

                <label class="item item-input">
                    <span class="input-label">Serial No.</span>
                    <input type="text" ng-model="appliance.serialnumber" ng-pattern="/^[0-9]+$/">
                </label>

                <label class="item item-input" ng-click="openedit(appliance.userlocation);" ng-class="allvalidation8[3].validation">
                    <span class="input-label">Location *</span>
                    <input type="text" ng-model="appliance.userlocation.name" readonly>
                </label>

                <label class="item item-input">
                    <span class="input-label">Cover</span>
                    <input type="text">
                </label>
                <label class="item items">
                    <span class="input-labels">Expiry</span>
                    <span class="date-days {{expirydate}}">
                    <span class="date">{{warranty.expiry}}</span>
                    <span class="days-main">{{appliance.days}}</span>
                    <span class="days">days</span>
                    </span>
<!--
                    <input type="text" ng-model="warranty.expiry" readonly class="{{expirydate}}"> Days :&nbsp;
                    <input type="text" ng-model="appliance.days" readonly class="{{expirydate}}">
-->
                </label>
            </div>
            <div class="padding">
                <button class="button button-outline button-block icon-right ion-chevron-right button-balanced" ng-click="changetab2(2);">Next</button>
            </div>
        </div>

        <div class="list" ng-if="tabvalue == 2">
            <label class="item item-input" ng-class="allvalidation4[0].validation">
                <span class="input-label">Purchase Date *</span>
                <input type="date" ng-model="store.purchasedate" ng-change="datevalidation()" required>
            </label>
            <label class="item item-input" ng-class="allvalidation4[1].validation">
                <span class="input-label">Bill No *</span>
                <input type="text" ng-model="store.billno">
            </label>
            <label class="item item-input" ng-class="allvalidation4[2].validation">
                <span class="input-label">Store Name *</span>
                <input type="text" ng-model="store.name">
            </label>
            <label class="item item-input">
                <span class="input-label">Store Pincode</span>
                <input type="text" ng-model="store.pincode" ng-pattern="/^[0-9]+$/">
            </label>
            <label class="item item-input">
                <span class="input-label">Store District</span>
                <input type="text" ng-model="store.district" ng-pattern="/^(\D)+$/">
            </label>
            <label class="item item-input">
                <div class="input-label">
                    Store State
                </div>
                <input type="text" ng-model="store.state" ng-pattern="/^(\D)+$/">
                <!--
                <select>
                    <option></option>
                    <option>Maharastra</option>
                    <option>Gujrat</option>
                </select>
-->
            </label>
            <label class="item item-input">
                <span class="input-label">Store Address</span>
                <input type="text" ng-model="store.address">
            </label>
            <label class="item item-input">
                <span class="input-label">Contact No.</span>
                <input type="text" ng-model="store.contact" ng-pattern="/^[0-9]+$/" ng-minlength="10" ng-maxlength="15">
            </label>
            <label class="item item-input">
                <span class="input-label">Sale Person</span>
                <input type="text" ng-model="store.saleperson">
            </label>
            <label class="item item-input" ng-class="allvalidation4[3].validation">
                <span class="input-label">Purchase Price *</span>
                <input type="text" ng-model="store.purchaseprice" ng-pattern="/^[0-9]+$/">
            </label>

            <div class="button-bar">
                <button class="button button-outline icon-left ion-chevron-left button-balanced" ng-click="changetab(1)">Previous</button>
                <button class="button button-outline icon-right ion-chevron-right button-balanced" ng-click="purchaseDetails(3)">Next</button>
            </div>
        </div>

        <div class="warranty" ng-if="tabvalue == 3">
            <div class="list">
                <div class="item product-wrnnty">
                    Product Warranty
                </div>
                <label class="item item-input" ng-if="readonly==true">
                    <span class="input-label" style="color:#BABAAC;">For Product Warranty Please Create AdditionalWarranty.</span>
                </label>

                <label class="item item-input" ng-if="readonly==false" ng-class="allvalidation[0].validation">
                    <span class="input-label">Warranty Period *</span>
                    <input type="text" ng-model="warranty.period">
                </label>
                <label class="item item-input item-select" ng-if="readonly==false" ng-class="allvalidation[1].validation">
                    <div class="input-label">
                        Warranty Type *
                    </div>
                    <select ng-model="warranty.type">
                        <option value="onsite">On Site</option>
                        <option value="offsite">Off Site</option>
                    </select>
                </label>
                <ion-item ng-click="opencomponent()">
                    <span class="balanced">Add Component Warranty</span>
                </ion-item>
                <div class="item product-wrnnty">
                    Component Warranty
                </div>
                <ion-item ng-click="opencompntwarranty(component)" ng-repeat="component in appliance.componentwarranty">
                    {{component.component}}
                    <span class="item-note">
                    Back Cover
                    </span>
                </ion-item>

                <ion-item ng-click="openpswd()">
                    <span class="balanced"> Add Additional Warranty / AMC</span>
                </ion-item>
                <div class="item product-wrnnty">
                    Additional Warranty / AMC
                </div>
                <ion-item ng-click="openwarranty(warranty)" ng-repeat="warranty in appliance.warranty">
                    {{warranty.billno}}
                    <span class="item-note">
                      
                    </span>
                </ion-item>
                <!--            </div>-->
                <!--
            <div class="" ng-click="opencomponent();">
               Component Warranty
            </div>   
               
                     <div class="add-warnty" ng-click="openpswd();">
                Additional Warranty / AMC
            </div>
-->
            </div>

            <div class="button-bar">
                <button class="button button-outline icon-left ion-chevron-left button-balanced" ng-click="changetab(2)">Previous</button>
                <button class="button button-outline icon-right ion-chevron-right button-balanced" ng-click="updateWarrantytab(4)">Next</button>
            </div>
        </div>

        <div class="list" ng-if="tabvalue == 4;">
            <div class="item product-wrnnty">
                Product Warranty Documents
            </div>


            <div class="row">
                <div class="col text-center">
                    <img style="width: 100px;height: 100px;" ng-src="{{productwarranty.bill | serverimage}}" ng-click="uploadProductBill();">
                </div>
                <div class="col text-center">
                    <img style="width: 100px;height: 100px;" ng-src="{{productwarranty.warrantycard | serverimage}}" ng-click="uploadProductWarrantycard();">
                </div>
            </div>
            <div class="row">
                <div class="col text-center" ng-click="uploadProductBill();">
                    <button class="button button-outline button-balanced button-block button-small" ng-class="warranty">Upload Bill</button>
                </div>
                <div class="col text-center" ng-click="uploadProductWarrantycard();">
                    <button class="button button-outline button-balanced button-block button-small" ng-class="warranty">Upload Warranty Card</button>
                </div>
            </div>
<!--
            <label class="item item-input" ng-if="warranty==''">
                <span class="input-label" style="color:#BABAAC;">No Warranty Yet..</span>
            </label>
-->


            <div class="item product-wrnnty">
                Components Warranty Documents
            </div>

            <label class="item" style="padding:0;" ng-if="componentwarranty!=''">
                <label class="item item-input item-select">

                    <div class="input-label">
                        Select Component
                    </div>
                    <select ng-model="compwarid" ng-init="compwarid=0" ng-change="storewarid(compwarid);" style="color: rgb(46, 204, 113);">
                        <option value="{{$index}}" ng-repeat="war in appliance.componentwarranty">{{war.component}}</option>
                        <!--
                        <option selected>Green</option>
                        <option>Red</option>
-->
                    </select>
                </label>
            </label>
            <div class="row" ng-if="componentwarranty!=''">
                <div class="col text-center">
                    <img style="width: 100px;height: 100px;" ng-src="{{documents.bill | serverimage}}" ng-click="uploadBill();">
                </div>
                <div class="col text-center">
                    <img style="width: 100px;height: 100px;" ng-src="{{documents.warrantycard | serverimage}}" ng-click="uploadwarrantycard();">
                </div>
            </div>
            <div class="row" ng-if="componentwarranty!=''">
                <div class="col text-center" ng-click="uploadBill();">
                    <button class="button button-outline button-balanced button-block button-small" ng-class="warranty">Upload Bill</button>
                </div>
                <div class="col text-center" ng-click="uploadwarrantycard();">
                    <button class="button button-outline button-balanced button-block button-small" ng-class="warranty">Upload Warranty Card</button>
                </div>
            </div>

            <label class="item item-input" ng-if="componentwarranty==''">
                <span class="input-label" style="color:#BABAAC;">No Component Warranty Yet..</span>
            </label>

            <div class="item product-wrnnty">
                Add Notes
            </div>
            <label class="item item-input">
                <input type="text" ng-model="appliance.note" placeholder="Add Note">
            </label>
            <div class="padding">
                <button class="button button-block button-outline icon-left ion-chevron-left button-balanced" ng-click="changetab(3)">Previous</button>
            </div>
        </div>
    </ion-content>
</ion-view>